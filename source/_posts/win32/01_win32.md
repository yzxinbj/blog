---
title: win32学习
p: win32/01_win32
date: 2017-11-21 17:31:04
tags: win32
categories: 编程
---

### 入口函数

```
int WINAPI WinMain
(  
      HINSTANCE hInstance,      // handle to current instance
      HINSTANCE hPrevInstance,  // handle to previous instance
      LPSTR lpCmdLine,          // command line
      int nCmdShow              // show state
);

```


### 窗口程序的编程步骤
```
step1:初始化一个WNDCLASS;

step2:向OS注册一下[你开店了总要向工商总局注册一下吧]

step3:调用CreateWindow()创建出窗口;

step4:获取OS发送来的各类消息;

step5:分发获取到的消息;
```

### 调试函数

```
AllocConsole();

freopen("CONOUT$","w",stdout);

FreeConsole();
```

### 窗口下输出文本
```
BOOL TextOut
(  
  HDC hdc,           // handle to DC
  int nXStart,       // x-coordinate of starting position
  int nYStart,       // y-coordinate of starting position
  LPCTSTR lpString,  // character string
  int cbString       // number of characters
);
int DrawText
(  
  HDC hDC,          // handle to DC
  LPCTSTR lpString, // text to draw  
  int nCount,       // text length
  LPRECT lpRect,    // formatting dimensions
  UINT uFormat      // text-drawing options
);
```

1、设备环境是什么
> 设备环境又称之为设备上下文，用以描述当前绘制的设备的属性，比如画笔的线宽，线型，颜色，背景色等等属性；

2、设备环境的作用
> 使得绘制操作可以独立于具体的设备，做到设备无关

### 设配环境的获取与释放
WM_PAINT消息中
使用 BeginPaint()获取设备环境，EndPaint()释放设备环境

其他场景中
使用GetDC()获取设备环境，ReleaseDC()释放设备环境


### 一些操作

```
获取/设置文本背景色：GetTextColor/SetTextColor

获取/设置文本颜色：GetBkColor/SetBkColor

获取/设置绘制模式：GetBkMode/SetBkMode

获取/设置文本对齐方式：GetTextAlign/SetTextAlign
```
### 控件
1、概念：
> WINDOWS 提供了几个预定义的窗口类以方便我们的使用,我们一般就它们叫做子窗口或者控件。

2、控件与父窗口的交互：
> 由于子控件有自己的回调函数，所以控件会自己处理消息，
> 并在自己状态发生改变时通知父窗口。

3、预定义的控件有：
> 按钮、复选框、编辑框、静态字符串标签和滚动条等

作业：  
1,什么是设备对象？
3.对照视频中的代码流程写一个程序，要求在程序上点击左键，显示红色的编程达人，点击右键显示黄色的欢迎你的字样效果        


作业：创建一个窗口应用程序，点击左键就由该程序再创建一个新的模态对话框，同理右键弹出非模态对话框，
扩展：创建一个应用程序，该应用程序一开始有一个登陆验证，该登陆验证需要输入账号密码，账号密码你们自己设定，只有验证通过以后才能进入真正的主程序窗口
        
        