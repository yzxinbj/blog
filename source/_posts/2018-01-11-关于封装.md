---
title: å…³äºå°è£…
date: 2018-01-11 15:01:53
tags: js object
categories: ç¼–ç¨‹
---

## å¯¹è±¡å°è£…
### ä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Ÿ
> å¯¹è±¡ï¼šæ— åºå±æ€§çš„é›†åˆï¼Œå…¶å±æ€§å¯ä»¥åŒ…å«åŸºæœ¬å€¼ï¼Œå¯¹è±¡æˆ–è€…å‡½æ•°


### åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•æœ‰å¤šå°‘ç§ï¼Ÿ

- var obj = {}; // å­—é¢é‡
- var obj = new Object(); // new


### å°è£…å¯¹è±¡çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ
- éšè—ç»†èŠ‚å®ç°ï¼Œå¼€æ”¾æ¥å£è°ƒç”¨
- å¤ç”¨ï¼Œä½¿é€»è¾‘æ¸…æ™°ï¼Œä»£ç å¥½ç»´æŠ¤


### æ€ä¹ˆå°è£…ï¼Ÿ

#### åŸå‹é“¾?

```javascript
// å·¥å‚æ¨¡å¼
function createPoint(x, y){
    var point = new Object();
    
    point.x = x;
    point.y = y;
    
    point.getX = function(){
        return x;
    };
    
    point.getY = function(){
            return y;
    };
    
    return point;
}

// å·¥å‚æ¨¡å¼æ²¡æœ‰è§£å†³è¯†åˆ«å¯¹è±¡çš„é—®é¢˜ï¼Œæ•…åˆå‘å±•å‡ºæ„é€ å‡½æ•°æ¨¡å¼
// æ„é€ å‡½æ•°æ¨¡å¼
function Point(x, y){
    this.x = x;
    this.y = y;
    
    this.getX = function() {
         return this.x;
    };
    
    this.getY = function(){
        return this.y;
    };
}

var point = new Point(1, 2);
point instanceof Point; // true

// æ„é€ å‡½æ•°æ¨¡å¼å¹¶æ²¡æœ‰è§£å†³é‡å¤åœ¨å®ä¾‹ä¸Šæœ‰é‡å¤æ–¹æ³•çš„é—®é¢˜ï¼Œå¦‚æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ª getX ,getY æ–¹æ³•
// æ•…åŸå‹æ¨¡å¼ï¼Œå»ºç«‹å…¬ç§æœ‰å±æ€§æˆ–æ–¹æ³•ï¼Œè§£å†³ğŸ‘†è¿™ä¸ªé—®é¢˜
function Point(x, y){
    this.x = x;
    this.y = y;
}

Point.prototype.getX = function(){
    return this.x;
};
Point.prototype.getY = function(){
    return this.y;
};
// æˆ–è€…
Point.protoType = {
    getX: function(){
        return this.x;
    },
    getY: function(){
       return this.y;
    },
    // æ³¨æ„è¿™ç§æ–¹å¼å¿…é¡»è¦åŠ  constructor, å› ä¸º {} è¡¨ç¤ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå…¶ä¸­å¹¶ä¸åŒ…å« constructor 
    constructor: Point
};

```
> æ³¨ï¼šåŠ  constructor çš„æƒ…å†µè¦è®°ä½, å› ä¸º {} è¡¨ç¤ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå…¶ä¸­å¹¶ä¸åŒ…å« constructor 

#### ç»§æ‰¿?
1. åŸå‹ç»§æ‰¿
```javascript
function SuperType(){
    this.a = false;
}
SuperType.prototype.getA = function(){
    return this.a;
};

function SubType(){
    this.b = true;
};

SubType.prototype = new SuperType();

var instance = new SubType();

```

2. call ç»§æ‰¿ï¼Œå€Ÿç”¨æ„é€ å‡½æ•°
```javascript
function SuperType(x, y){
    this.x = x;
    this.y = y;
}

function SubType(x, y, z){
    SuperType.call(this, x, y);
    this.z = z;
}
```

3. ç»„åˆç»§æ‰¿
```javascript
function SuperType(x, y){
    this.x = x;
    this.y = y;
}

SuperType.prototype.getX = function(){
    return this.x;
}

function SubType(x, y, z){
    SuperType.call(this, x, y);
    this.z = z;
}

// ç»“åˆ call ç»§æ‰¿å¤šäº†ä¸‹é¢è¿™ä¸¤è¡Œ
SubType.prototype = new SuperType();
SubType.prototype.constructor = SubType;
SubType.prototype.getZ = function(){
    return this.z;
};
```


4. å¯„ç”Ÿç»„åˆç»§æ‰¿
```javascript
function SuperType(x, y){
    this.x = x;
    this.y = y;
}

SuperType.prototype.getX = function(){
    return this.x;
}

function SubType(x, y, z){
    SuperType.call(this, x, y);
    this.z = z;
}

function object(o){
    function F(){}
    F.prototype=o;
    return new F();
}

// ä¸‹é¢è¿™ä¸‰è¡Œæ˜¯é‡ç‚¹
var prototype = object(SuperType.prototype);
prototype.constructor = SubType;
SubType.prototype = prototype;

SubType.prototype.getZ = function(){
    return this.z;
};
```

5. ES6çš„ç±»ç»§æ‰¿

#### new?

```javascript
function Base(name, age){
    this.name = name;
    this.age = age;
}

var obj = new Base();

// new ç­‰ä»·äº
var obj = {};
obj.__proto__ = Base.prototype;
Base.call(obj, name, age);

obj instanceof Base // true

```

